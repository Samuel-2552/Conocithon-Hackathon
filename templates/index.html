<!DOCTYPE html>
<html>
  <head>
    <title>Get User Location</title>
    <script>
      function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(showPosition);
        } else {
          alert("Geolocation is not supported by this browser.");
        }
      }
      
      function showPosition(position) {
        document.getElementById("latitude").innerHTML = position.coords.latitude;
        document.getElementById("longitude").innerHTML = position.coords.longitude;
      }
      
      function output() {
        const latitude = document.getElementById('latitude').textContent;
        const longitude = document.getElementById('longitude').textContent;
        const xhr = new XMLHttpRequest();
        xhr.open('POST', '/update-location', true);
        xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
        xhr.onload = function() {
          const responseText = this.responseText;
          document.getElementById("response").innerHTML = responseText;
        };
        xhr.send(JSON.stringify({latitude: latitude, longitude: longitude}));
      }
    </script>
  </head>
  <body>
    <h1>Get User Location</h1>
    <button onclick="getLocation()">Get Location</button>
    <p>Latitude: <span id="latitude"></span></p>
    <p>Longitude: <span id="longitude"></span></p>
    <button onclick="output()">Update</button>
    <div id="response"></div>
  </body>
</html>
